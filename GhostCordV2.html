<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>GhostCord V2</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:#111;color:#0f0;font-family:consolas,monospace;height:100vh;display:flex;overflow:hidden}
        #login{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;z-index:10}
        #login input,#login button{margin:10px;padding:15px 25px;font-size:18px;background:#000;color:#0f0;border:2px solid #0f0}
        #login button{background:#0f0;color:#000;cursor:pointer}
        .hidden{display:none!important}
        #app{display:flex;width:100vw;height:100vh}
        #sidebar{width:250px;background:#1a1a1a;border-right:4px solid #0f0;padding:20px}
        #sidebar h3{color:#0f0;margin-bottom:20px;font-size:20px}
        #userlist div{margin:10px 0;color:#0f0;font-size:16px}
        #center{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}
        #messages{width:75%;max-width:1000px;height:70vh;background:#000;border:5px solid #0f0;padding:30px;overflow-y:auto;font-size:18px;box-shadow:0 0 50px rgba(0,255,0,0.5)}
        #messages div{margin:15px 0;word-wrap:break-word}
        #input{margin-top:25px;width:75%;max-width:1000px;display:flex;border:4px solid #0f0;background:#222}
        #msg{flex:1;background:transparent;color:#0f0;border:none;outline:none;padding:18px;font-size:18px}
        #msg::placeholder{color:#040}
        #input button{background:#0f0;color:#000;border:none;padding:0 40px;cursor:pointer;font-weight:bold;font-size:16px}
    </style>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>

    <div id="login">
        <input type="text" id="username" placeholder="Enter username" autofocus>
        <button onclick="login()">JOIN</button>
    </div>

    <div id="app" class="hidden">
        <div id="sidebar">
            <h3>ONLINE</h3>
            <div id="userlist"></div>
        </div>
        <div id="center">
            <div id="messages"></div>
            <div id="input">
                <input type="text" id="msg" placeholder="Type message..." autofocus>
                <button onclick="send()">SEND</button>
            </div>
        </div>
    </div>

<script>
let socket, username;

function login(){
    username = document.getElementById("username").value.trim() || "ghost"+Math.floor(Math.random()*9999);
    document.getElementById("login").classList.add("hidden");
    document.getElementById("app").classList.remove("hidden");

    // YOUR NEW RENDER URL HERE
    socket = io("https://ghostcordv2.onrender.com");

    socket.emit("add user", username);

    socket.on("login", data => updateUsers(data.users));
    socket.on("new message", data => addMessage(data.username, data.message));
    socket.on("user joined", data => { addSys(data.username + " joined"); updateUsers(data.users); });
    socket.on("user left", data => { addSys(data.username + " left"); updateUsers(data.users); });
}

function send(){
    let m = document.getElementById("msg").value.trim();
    if(m){
        socket.emit("new message", {username: username, message: m});
        document.getElementById("msg").value = "";
    }
}

function addMessage(u, m){
    let div = document.createElement("div");
    div.innerHTML = `<span style="color:#0f0">${u}:</span> ${m}`;
    document.getElementById("messages").appendChild(div);
    div.scrollIntoView();
}

function addSys(text){
    let div = document.createElement("div");
    div.textContent = text;
    div.style.color = "#0f0";
    div.style.opacity = "0.6";
    document.getElementById("messages").appendChild(div);
    div.scrollIntoView();
}

function updateUsers(list){
    document.getElementById("userlist").innerHTML = "";
    list.forEach(u => {
        let div = document.createElement("div");
        div.textContent = u;
        document.getElementById("userlist").appendChild(div);
    });
}

document.addEventListener("keypress", e=>{
    if(e.key==="Enter"){
        document.getElementById("login").classList.contains("hidden") ? send() : login();
    }
});
</script>
</body>
</html>
